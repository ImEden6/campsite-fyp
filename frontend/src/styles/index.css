/*
  Global Styles - Tailwind v4
  ---- the *main* stylesheet with tailwind imports and custom styles
 */

@import "tailwindcss";
@import "./editor.css";

@variant dark (&:where(.dark, .dark *));

@theme {
  /* Brand Colors */
  --color-primary-50: #f0f9ff;
  --color-primary-100: #e0f2fe;
  --color-primary-200: #bae6fd;
  --color-primary-300: #7dd3fc;
  --color-primary-400: #38bdf8;
  --color-primary-500: #0ea5e9;
  --color-primary-600: #0284c7;
  --color-primary-700: #0369a1;
  --color-primary-800: #075985;
  --color-primary-900: #0c4a6e;
  --color-primary-950: #082f49;

  --color-secondary-50: #fafaf9;
  --color-secondary-100: #f5f5f4;
  --color-secondary-200: #e7e5e4;
  --color-secondary-300: #d6d3d1;
  --color-secondary-400: #a8a29e;
  --color-secondary-500: #78716c;
  --color-secondary-600: #57534e;
  --color-secondary-700: #44403c;
  --color-secondary-800: #292524;
  --color-secondary-850: #1f1e1d;
  --color-secondary-900: #1c1917;
  --color-secondary-950: #0c0a09;

  /* Gray scale with 850 */
  --color-gray-850: #1a1d23;

  /* Status Colors */
  --color-success-50: #f0fdf4;
  --color-success-100: #dcfce7;
  --color-success-200: #bbf7d0;
  --color-success-300: #86efac;
  --color-success-400: #4ade80;
  --color-success-500: #22c55e;
  --color-success-600: #16a34a;
  --color-success-700: #15803d;
  --color-success-800: #166534;
  --color-success-900: #14532d;
  --color-success-950: #052e16;

  --color-warning-50: #fffbeb;
  --color-warning-100: #fef3c7;
  --color-warning-200: #fde68a;
  --color-warning-300: #fcd34d;
  --color-warning-400: #fbbf24;
  --color-warning-500: #f59e0b;
  --color-warning-600: #d97706;
  --color-warning-700: #b45309;
  --color-warning-800: #92400e;
  --color-warning-900: #78350f;
  --color-warning-950: #451a03;

  --color-error-50: #fef2f2;
  --color-error-100: #fee2e2;
  --color-error-200: #fecaca;
  --color-error-300: #fca5a5;
  --color-error-400: #f87171;
  --color-error-500: #ef4444;
  --color-error-600: #dc2626;
  --color-error-700: #b91c1c;
  --color-error-800: #991b1b;
  --color-error-900: #7f1d1d;
  --color-error-950: #450a0a;

  --color-info-50: #eff6ff;
  --color-info-100: #dbeafe;
  --color-info-200: #bfdbfe;
  --color-info-300: #93c5fd;
  --color-info-400: #60a5fa;
  --color-info-500: #3b82f6;
  --color-info-600: #2563eb;
  --color-info-700: #1d4ed8;
  --color-info-800: #1e40af;
  --color-info-900: #1e3a8a;
  --color-info-950: #172554;

  /* Booking Status Colors */
  --color-booking-pending: #f59e0b;
  --color-booking-confirmed: #22c55e;
  --color-booking-checked-in: #3b82f6;
  --color-booking-checked-out: #78716c;
  --color-booking-cancelled: #ef4444;

  /* Font Families */
  --font-family-sans: Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-family-mono: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

  /* Spacing */
  --spacing-18: 4.5rem;
  --spacing-88: 22rem;
  --spacing-128: 32rem;

  /* Border Radius */
  --radius-campsite: 0.5rem;

  /* Box Shadows */
  --shadow-campsite: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-campsite-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-inner-campsite: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);

  /* Breakpoints */
  --breakpoint-xs: 475px;
  --breakpoint-3xl: 1920px;
}

/* Button Components */
.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-weight: 500;
  color: white;
  background-color: rgb(37 99 235);
  transition: background-color 0.2s;
}

.btn-primary:hover {
  background-color: rgb(29 78 216);
}

.dark .btn-primary {
  background-color: rgb(59 130 246);
}

.dark .btn-primary:hover {
  background-color: rgb(37 99 235);
}

.btn-outline {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-weight: 500;
  color: rgb(55 65 81);
  background-color: white;
  border: 1px solid rgb(209 213 219);
  transition: all 0.2s;
}

.btn-outline:hover {
  background-color: rgb(249 250 251);
}

.dark .btn-outline {
  color: rgb(229 231 235);
  background-color: rgb(31 41 55);
  border-color: rgb(75 85 99);
}

.dark .btn-outline:hover {
  background-color: rgb(55 65 81);
}

.btn-sm {
  padding: 0.375rem 0.75rem;
  font-size: 0.875rem;
}

/* Common utility classes with dark mode */
.card {
  @apply rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm;
}

.card-body {
  @apply px-6 py-4;
}

.card-header {
  @apply border-b border-gray-200 dark:border-gray-700 px-6 py-4;
}

.card-footer {
  @apply border-t border-gray-200 dark:border-gray-700 px-6 py-4;
}

.text-muted {
  @apply text-gray-600 dark:text-gray-400;
}

.text-primary {
  @apply text-gray-900 dark:text-gray-100;
}

.bg-surface {
  @apply bg-white dark:bg-gray-800;
}

.border-default {
  @apply border-gray-200 dark:border-gray-700;
}

/* Custom CSS Reset */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  transition: background-color 0.3s ease, color 0.3s ease;
}

body {
  font-feature-settings: 'rlig' 1, 'calt' 1;
  -webkit-overflow-scrolling: touch;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Theme transitions - only apply to elements that need theme changes */
/* Use .theme-transition class for components that need smooth theme transitions */
.theme-transition,
.theme-transition * {
  transition-property: background-color, border-color, color, fill, stroke;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
}

/* Disable transitions for elements that should animate independently */
.no-theme-transition,
[class*="animate-"],
[class*="transition-transform"],
[class*="transition-opacity"] {
  transition-property: transform, opacity !important;
}

/* Scrollbar Styles */
::-webkit-scrollbar {
  width: 0.5rem;
  height: 0.5rem;
}

::-webkit-scrollbar-track {
  background-color: rgb(243 244 246);
}

@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar-track {
    background-color: rgb(17 24 39);
  }
}

::-webkit-scrollbar-thumb {
  background-color: rgb(209 213 219);
  border-radius: 9999px;
}

@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar-thumb {
    background-color: rgb(55 65 81);
  }
}

::-webkit-scrollbar-thumb:hover {
  background-color: rgb(156 163 175);
}

@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar-thumb:hover {
    background-color: rgb(75 85 99);
  }
}

/* Focus Styles - Enhanced for accessibility */
:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px white, 0 0 0 4px rgb(59 130 246);
}

/* Ensure focus is always visible for keyboard users */
body.using-keyboard *:focus-visible {
  box-shadow: 0 0 0 2px white, 0 0 0 4px rgb(59 130 246);
}

/* Selection Styles */
::selection {
  background-color: rgb(191 219 254);
  color: rgb(30 58 138);
}

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Make sr-only content visible when focused */
.sr-only:focus,
.sr-only:active {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Not sr-only - for skip links */
.focus\:not-sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Define @keyframes for animations - using translate3d for GPU acceleration */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translate3d(0, 4px, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }

  to {
    opacity: 0;
    transform: translate3d(0, -4px, 0);
  }
}

@keyframes fade-out {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translate3d(0, 10px, 0);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
}

@keyframes slideDown {
  from {
    transform: translate3d(0, -10px, 0);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
}

@keyframes slideLeft {
  from {
    transform: translate3d(10px, 0, 0);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
}

@keyframes slideRight {
  from {
    transform: translate3d(-10px, 0, 0);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
}

@keyframes shimmer {
  from {
    background-position: -200% 0;
  }

  to {
    background-position: 200% 0;
  }
}

@keyframes progressIndeterminate {
  0% {
    transform: translate3d(-100%, 0, 0);
  }

  50% {
    transform: translate3d(100%, 0, 0);
  }

  100% {
    transform: translate3d(-100%, 0, 0);
  }
}

/* View Transition API styles for smooth dark mode */
@supports (view-transition-name: root) {

  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 0.3s;
    animation-timing-function: ease-in-out;
  }

  ::view-transition-old(root) {
    animation-name: fade-out;
  }

  ::view-transition-new(root) {
    animation-name: fade-in;
  }
}

/* Animation Utilities */
.animate-in {
  animation: fadeIn 0.3s ease-in-out;
}

.animate-out {
  animation: fadeOut 0.3s ease-in-out;
}

/* Truncate Utilities */
.truncate-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.truncate-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Mobile-specific styles */
@media (max-width: 767px) {

  /* Optimize tap targets */
  button,
  a,
  input[type="button"],
  input[type="submit"] {
    min-height: 44px;
  }

  /* Improve scrolling performance */
  * {
    -webkit-overflow-scrolling: touch;
  }
}

/* Print Styles */
@media print {
  body {
    color: black;
    background-color: white;
  }

  .no-print {
    display: none !important;
  }

  /* Hide mobile navigation on print */
  .mobile-nav,
  .sidebar {
    display: none !important;
  }
}

/* Map Editor Specific Styles */

/* Sidebar slide animations */
.sidebar {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
    opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
    width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Only add will-change when sidebar is actively animating */
.sidebar.animating {
  will-change: transform, opacity;
}

.sidebar-header {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-body {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Toolbar transitions */
.toolbar {
  transition: all 0.2s ease-in-out;
}

.toolbar-section {
  transition: all 0.2s ease-in-out;
}

/* Tool button transitions */
.toolbar button {
  transition: all 0.15s ease-in-out;
  position: relative;
}

.toolbar button:hover {
  transform: translate3d(0, -1px, 0);
}

.toolbar button:active {
  transform: translateY(0);
}

/* Smooth transitions for active tool state */
.toolbar button.active {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Canvas cursor transitions */
.canvas-container {
  transition: cursor 0.1s ease-in-out;
}

/* Status bar animations */
.status-bar {
  animation: slideUp 0.3s ease-out;
}

/* Unsaved changes indicator pulse */
@keyframes pulse-warning {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.7;
  }
}

.unsaved-indicator {
  animation: pulse-warning 2s ease-in-out infinite;
}

/* Save button loading state */
.btn-saving {
  position: relative;
  pointer-events: none;
}

.btn-saving::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg,
      transparent,
      rgba(255, 255, 255, 0.3),
      transparent);
  animation: shimmer 1.5s infinite;
}

/* Drop zone highlight */
.drop-zone-active {
  animation: pulse-drop 1s ease-in-out infinite;
}

@keyframes pulse-drop {

  0%,
  100% {
    border-color: rgb(96 165 250);
    background-color: rgba(96, 165, 250, 0.05);
  }

  50% {
    border-color: rgb(59 130 246);
    background-color: rgba(59, 130, 246, 0.1);
  }
}

/* Module drag feedback */
.module-dragging {
  transition: opacity 0.15s ease-in-out, transform 0.15s ease-in-out;
  opacity: 0.7;
  transform: scale(1.02);
}

/* Selection bounding box animation */
.selection-box {
  animation: dash 20s linear infinite;
}

@keyframes dash {
  to {
    stroke-dashoffset: -100;
  }
}

/* Transform handle hover effects */
.transform-handle {
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

.transform-handle:hover {
  transform: scale(1.2);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.transform-handle:active {
  transform: scale(1.1);
}

/* Rotation handle animation */
.rotation-handle {
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

.rotation-handle:hover {
  transform: scale(1.2);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

/* Info display (angle, size) animations */
.transform-info {
  animation: fadeIn 0.2s ease-out;
}

/* Ruler animations */
.ruler {
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translate3d(-10px, 0, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

/* Properties panel slide animation */
.properties-panel {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.properties-panel.collapsed {
  transform: translateX(100%);
}

/* Zoom controls */
.zoom-control {
  transition: all 0.15s ease-in-out;
}

.zoom-control:hover {
  transform: scale(1.05);
}

.zoom-control:active {
  transform: scale(0.95);
}

/* Grid toggle animation */
.grid-toggle {
  transition: all 0.2s ease-in-out;
}

/* Module lock indicator pulse */
@keyframes pulse-lock {

  0%,
  100% {
    opacity: 0.9;
    transform: scale(1);
  }

  50% {
    opacity: 1;
    transform: scale(1.1);
  }
}

.lock-indicator {
  animation: pulse-lock 2s ease-in-out infinite;
}

/* Toast notification slide in */
.toast-notification {
  animation: slideInRight 0.3s ease-out;
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translate3d(100%, 0, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

/* Error message shake */
@keyframes shake {

  0%,
  100% {
    transform: translate3d(0, 0, 0);
  }

  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translate3d(-5px, 0, 0);
  }

  20%,
  40%,
  60%,
  80% {
    transform: translate3d(5px, 0, 0);
  }
}

.error-shake {
  animation: shake 0.5s ease-in-out;
}

/* Loading spinner */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

.spinner {
  animation: spin 1s linear infinite;
}

/* Smooth scroll behavior */
.smooth-scroll {
  scroll-behavior: smooth;
}

/* Disable transitions during resize */
.resizing * {
  transition: none !important;
}

/* Performance optimization for Fabric.js canvas */
.canvas-container canvas {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}